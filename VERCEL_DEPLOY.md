# Инструкции по развертыванию на Vercel

## Настройка проекта в Vercel

1. Войдите в свой аккаунт Vercel или создайте новый на [vercel.com](https://vercel.com)

2. Создайте новый проект:
   - Нажмите на кнопку "Add New" → "Project"
   - Импортируйте репозиторий из GitHub (Gimmyhat/sushimi)
   - Если репозиторий не отображается, настройте интеграцию GitHub с Vercel

3. Настройте параметры проекта:
   - **Framework Preset**: Next.js
   - **Root Directory**: `./` (если ваш проект находится в корне репозитория)
   - **Build Command**: (оставьте по умолчанию)
   - **Output Directory**: `.next` (по умолчанию для Next.js)

## Настройка переменных окружения

1. Перейдите в раздел "Settings" → "Environment Variables" вашего проекта

2. Добавьте следующие переменные:
   ```
   DATABASE_URL = postgres://neondb_owner:npg_GCXDOK3Mxg1Z@ep-yellow-boat-a29fvi3m-pooler.eu-central-1.aws.neon.tech/neondb?sslmode=require
   USE_SSL = true
   ```

3. Проверьте настройки сред:
   - Убедитесь, что переменные применяются ко всем средам (Production, Preview, Development)
   - Нажмите "Save" для сохранения переменных

## Инициализация базы данных

База данных нужно инициализировать вручную после развертывания:

1. Клонируйте репозиторий на вашу локальную машину:
   ```bash
   git clone https://github.com/Gimmyhat/sushimi.git
   cd sushimi
   ```

2. Установите зависимости:
   ```bash
   npm install
   ```

3. Запустите скрипт инициализации базы данных:
   ```bash
   node scripts/manual-db-init.js
   ```

4. Проверьте логи на наличие ошибок. Если инициализация прошла успешно, вы увидите сообщение "База данных успешно инициализирована".

## Проверка развертывания

После инициализации базы данных и завершения развертывания:

1. Перейдите по ссылке, предоставленной Vercel (например, `sushimi-project.vercel.app`)

2. Проверьте, что приложение работает и может получать данные из базы:
   - Убедитесь, что категории и продукты загружаются корректно
   - Проверьте функциональность оформления заказа

## Устранение возможных проблем

1. Если вы видите ошибки при загрузке данных:
   - Проверьте консоль браузера на наличие ошибок
   - Проверьте логи функций в Vercel на наличие ошибок соединения с базой данных

2. Если вы видите сообщение об ошибке подключения к базе данных:
   - Проверьте, правильно ли настроены переменные окружения в Vercel
   - Проверьте, доступна ли база данных Neon извне

3. Для дополнительной отладки:
   - Используйте инструменты мониторинга Vercel для проверки логов функций
   - Используйте консоль Neon для проверки запросов к базе данных

## Важные замечания по безопасности

⚠️ **Важно!** Данные подключения к базе данных, содержащие учетные данные, не должны быть включены в репозиторий. Используйте их только в панели управления Vercel в качестве переменных окружения. 